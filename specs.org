*             *How I Wrote Over One Million Specs
                   in Less Than 24 Hours*


           PS: I work at Bluebox but didn't create
                 an ascii logo yet... sorry...



                    â‹›â‹‹( â€˜Î˜â€™)â‹Œâ‹š @niftyn8

                              Ì‘ PPS: We're hiring (â€¢Ì€á´—â€¢Ì)ÙˆÌ‘Ì‘

*                    { brace yourselves }

                       ~heh... get it?~

                         ~brace...~  (Â¬â€¿Â¬)

*                     *y u rite so many?*


             (ã€ã‚œãƒ­ã‚œ)ã€ ~OVER 9000!!!~


                              ~(1 million even...)~ Ê•á´¥â€¢ Ê”â˜



*
*                    *how u rite so many???*

                                        ~how?~ (â€¢à¸´_â€¢à¸´)?

          Ê• âŠƒï½¥ â—¡ ï½¥ Ê”âŠƒ ~we'll get there...~

*                    *a little background*


                   I write ğŸ’ ALL day ï½¡â—•â€¿â—•ï½¡


                                           ~... at work.~

*                       *but at home...*

                          I <3 Î»


                (Ë‡_Ë‡â€) Æª(Ë˜âŒ£Ë˜)â” Æª(Ë˜âŒ£Ë˜)Êƒ â”Œ(Ë˜âŒ£Ë˜)Êƒ


                     Ê•â€¢Íœ Í¢ Í â€¢Ê”  ~I'll play with anything...~

*                   ~i can haz lithp?~ ãƒ½(*âŒ’âˆ‡âŒ’*)ï¾‰


             (define (â¤lang)
               (display "As long as it has ()s"))

*               *wait... wat were we talking about?*

                 ~sorry for the diversion...~
             ~promise there's a point to this...~ ğŸ˜½

*           *TDD IS DEAD!*     ~i need a hug... (>'.')>~



                    *or so some* might say...


            ~Ã³_Ã² (are we still listening to that guy?)~

*                      *Long Live TDD!!!*



                     (^_________________^)



                       ~testing makes me _really_ happy.~

*                *EVEN MORE TDD!!! \m/(>.<)\m/*

                â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤
                â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤
                â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤
                â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤
                â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤
                â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤
                â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤
                â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤
                â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤
                â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤ â¬¤
*                *EVEN MORE POWERFUL TDD!!!*


                    ~put 'em up~ âœ§Ê•Ì¢Ì£Ì£Ì£Ì£Ì©Ì©Ì©Ì©Â·Í¡Ë”Â·à½¼ÉÌ¡Ì£Ì£Ì£Ì£Ì©Ì©Ì©Ì©âœ§

*                              *but n8...* (Â´Î¹_ï½€ )

            à¹‘âšˆ â€¤Ì« âšˆà¹‘)  ~yeeessss....~


            How could we make TDD more powerful???

                            O.o
*                       ((())) Î»Î»Î»Î»


                       () ~we have the technology~


           ~by jove I think they've got it~ Î»

*              [say hello to my little friend]


                    GENERATIVE TESTING!!!


                 â”—( ^o^)â”›â‰¡â”( ^o^)â”“â‰¡â”—( ^o^)â”›

*                         wat.
#+begin_src ruby
                 describe "#reverse" do
                 end
#+end_src

*              (Â¬ -Ì® Â¬)   [for all something...]

#+begin_src ruby
            forall(:string) { generate(:string) }
#+end_src
*                      please work...
#+begin_src ruby
  it "shall make the last first and the first last" do
    expect(string.reverse.last).to eq(string.first)
  end
#+end_src
*                    *all together now!*
#+begin_src ruby
  describe "#reverse" do
    generative do
      forall(:string) { generate(:string) }

      it "shall make the last first and the first last" do
        expect(string.reverse.last).to eq(string.first)
      end
    end
  end
#+end_src

*                       *drum roll...*

#+begin_src bash
$ rake
> GENERATIVE_COUNT=10_000
> rspec --require generative --format Generative --tag generative
> Run options: include {:generative=>true}
#+end_src

*                         *~BAM!~*
#+begin_src bash
> String
>  #reverse
>    generative
>      last shall be first and first shall be last
>
> Finished in 0.68 seconds
> 10000 examples, 0 failures
#+end_src
*                      *genera-whaaa...*

#+begin_src ruby

                    *generative do*
                       *# some stuff*
                    *end*
#+end_src
                             ~this is a generative test~
                             ~after all...~ ï¼ˆã€œ^âˆ‡^)ã€œ

*                       *Generative*

#+begin_src ruby
                      # Gemfile
                      gem 'generative'
#+end_src

           ~it's just a gem!~ â™ª(((#^-^)å…«(^_^*)))â™ª

*                       *Degenerate*

#+begin_src ruby
                      # Gemfile
                      gem 'degenerate'
#+end_src
*                     [Panic Moonwalk...]


         ~Do *not* moonwalk away from me!~  o(-`Ğ´Â´- ï½¡)
*                  *what* just happened? (Â¬â–‚Â¬)


             (âŒ¯âŠ™â›âŠ™)  ~is he ever going to explain?~

         ~I've just been looking at pictures...~ (=^â€¥^=)
*                    Welcome to Amazon  (ï½¥`â—¡Â´ï½¥)ã‚
#+begin_src ruby
        # order == Order.new(type: :digital, address: '429 Wallaby Way',
        #                    email: 'nemo@thesea.com', store_id: '1')

        # order.to_variant == [:digital, #<Order:0x007feb1b06cda0>]

        OrderDispatch.dispatch(order.to_variant)

#+end_src
*                 Just Another Day on the Job...
#+begin_src ruby
       class OrderDispatch

       def self.dispatch(order)
         cases order,
           digital: ->(o) { o.email! },
           pickup: ->(o) { o.ship_to_store! },
           delivery: ->(o) { o.shipit! }
         end
       end
#+end_src

*                         variants...
#+begin_src ruby
   def cases(variant, matches)
     raise NonVariant unless is_variant?(variant)
     type, *args = variant
     m = matches[type] || matches[:else]
     m.call(*args)
   end
#+end_src

*                          is it?...
#+begin_src ruby
   def is_variant?(variant)
     type, *rest = variant
     type.is_a?(Symbol) || type.is_a?(String)
   end
#+end_src

*                   It looks like it works
#+begin_src ruby
    it "returns true for a valid variant" do
      expect(is_variant?([:string, "test"])).to be true
    end


#+end_src

*                 Still looking good!
#+begin_src ruby
    it "returns false for things that aren't variants" do
      expect(is_variant?(User.new)).to be false
    end
#+end_src

*                    Let's just make sure...

#+begin_src ruby
    Generative.register(:variant) do
      [generate(:key), generate(:any)]
    end
#+end_src

*                    Let's just make sure...

#+begin_src ruby
   generative do
     data(:variant) { generate(:variant) }

     it "returns true for variants" do
       expect(is_variant?(variant)).to be true
     end
   end
#+end_src

*                    Let's just make sure...
#+begin_src ruby
    Generative.register(:nonvariant) do
      generators = Generative.manager.generators
      generator = generators.keys.select { |g|
        !g.to_s.match(/variant/)
      }.sample
      generator.call(limit: 100)
    end
#+end_src

*                    Let's just make sure...
#+begin_src ruby
   generative do
     data(:nonvariant) { generate(:nonvariant) }

     it "returns false for nonvariants" do
       expect(is_variant?(nonvariant)).to be false
     end
   end
#+end_src

*                         WOOPS!

Failures:

  1) Nifty::Variants is_variant?  returns false of invalid variants
     Failure/Error: expect(is_variant?(nonvariant)).to be false

       expected false
            got true
       shrunk example: :eoaijo

     # ./spec/lib/nifty/variants_spec.rb:47:in `block (4 levels) in <top (required)>'

*                    Why did that fail?
#+begin_src ruby
    first, *rest = [1, 2, 3]
    first == 1
    rest == [2, 3]
#+end_src

*                    Why did that fail?
#+begin_src ruby
    first, *rest = :eoaijo
    first == :eoaijo
    rest == []
#+end_src

*                          B4
#+begin_src ruby
   def is_variant?(variant)
     type, *rest = variant
     type.is_a?(Symbol) || type.is_a?(String)
   end
#+end_src


*                        after

#+begin_src ruby
   def is_variant?(variant)
     type, *rest = variant
     (type.is_a?(Symbol) || type.is_a?(String)) &&
        !rest.empty?
   end
#+end_src

*                    Ok... but what about...

         Ù©(Í¡à¹Ì¯Í¡à¹)Û¶     ~you have some 'splainin to do~
*                    Ok... but what about...

                  Performance?

                      **limit the scope of what you're generating
